---
title: è®¾è®¡æ¨¡å¼æ‚æ‚è°ˆ
updated: 2014-05-26
---

> åŒ—å†¥æœ‰é±¼ï¼Œå…¶åä¸ºé²²ã€‚
> é²²ä¹‹å¤§ï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿã€‚
> åŒ–è€Œä¸ºé¸Ÿï¼Œå…¶å ä¸ºé¹ã€‚é¹ä¹‹èƒŒï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿã€‚
> æ€’è€Œé£ï¼Œå…¶ç¿¼è‹¥å‚å¤©ä¹‹äº‘ã€‚æ˜¯é¸Ÿä¹Ÿ ï¼Œæµ·è¿åˆ™å°†å¾™äºå—å†¥ã€‚
> å—å†¥è€…ï¼Œå¤©æ± ä¹Ÿã€‚ -- åº„å­

ä¸çŸ¥é“ä»ä»€ä¹ˆæ—¶å€™èµ·è®¾è®¡æ¨¡å¼ï¼Œæ…¢æ…¢å˜æˆä¸€ä¸ªè£…é€¼å¿…å¤‡çš„ç†è®ºå¼€å§‹è¢«è®¨è®ºäº†ï¼Œä¹Ÿè®¸50å¹´äº†ã€‚ä»Šå¤©æˆ‘ä»¬èŠä¸€ç§æ¨¡å¼
##Strategy Pattern
æˆ‘ä»¬å…ˆä¸è¯´è¿™äº›æœ‰çš„æ²¡çš„æ¨¡å¼è¯¥æ˜¯ä»€ä¹ˆè¡¨ç°å½¢å¼ï¼Œç…§ä¾‹åº”è¯¥å…ˆå¹æ¯”ã€‚é¦–å…ˆè¯´è¯´Strategy patternçš„strategyæ˜¯ä»€ä¹ˆæ„æ€
> a plan of action or policy designed to achieve a major or overall aim.
ï¼ˆä»¥ä¸Šæ˜¯Google translateå‹æƒ…æä¾›ç¿»è¯‘ã€‚ï¼‰

è¯´Strategyæ˜¯ä¸ºäº†ä¸€ä¸ªé•¿æœŸçš„ç›®æ ‡åˆ¶å®šçš„ä¸€ä¸ªåŠ¨ä½œã€‚ä»è¿™ç§è§£é‡Šå¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™ä¸ªæ¨¡å¼å…¶å®æ˜¯ä»£ç ä¸­çš„åŠ¨ä½œï¼ˆå‡½æ•°ï¼Œæ–¹æ³•ï¼‰çš„é›†åˆã€‚æˆ‘æƒ³å¤§å®¶çœ‹è¿‡ä¸‰å›½å§ï¼ŒStrategy patternå°±åƒè¯¸è‘›è€å„¿ç»™çš„é”¦å›Šè®¡ï¼Œä½ è¦ç”¨çš„æ—¶å€™æ‰¾æˆ‘,æˆ‘ç»™ä½ æˆ‘çš„æŠ€å·§ã€‚ï¼ˆè¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œ1.è¿™ä¸ªç»™çš„åªæ˜¯æ–¹æ³•è€Œä¸æ˜¯å¯¹è±¡ï¼ˆæˆ‘è¯´çš„è¿™ä¸ªå¯¹è±¡æ˜¯ï¼Œå³å°è£…äº†å±æ€§åˆå°è£…äº†æ–¹æ³•çš„å¯¹è±¡ï¼‰ã€‚ä»–åœ¨ä»£ç çš„è¡¨ç°å½¢å¼ä¸Šæ›´åƒä¸€ä¸ªå±æ€§ï¼Œä½ é€šè¿‡setterå’Œgetteræ–¹æ³•æ”¹å˜å’Œè·å–è¿™ä¸ªå¯è®¾ç½®çš„Strategyã€‚

1. è®¾è®¡æ¨¡å¼æ•´ä½“çš„æ¦‚å¿µåœ¨äºæŠ½è±¡ä¸–ç•Œï¼Œæ‰€ä»¥ä»–ä»¬å¸¸å¸¸æŠŠåœ¨**ä¸åŒæƒ…å†µ**ä¸‹æ”¹å˜çš„ä¸œè¥¿å˜å¾—å¯ä»¥æ”¹å˜å¹¶ä¸”**æå‡ºæ¥**ã€‚
2. è®¾è®¡æ¨¡å¼é‡Œé¢è¿˜æœ‰ä¸€ä¸ªæŠ€å·§ï¼Œé€šè¿‡åœ¨ç±»é‡Œå®ç°ä¸€ä¸ªç©ºæ–¹æ³•ï¼Œè°ƒç”¨ç»„åˆå¯¹è±¡çš„æ–¹æ³•æ¥æé«˜å¹¶å°è£…äº†ç»„åˆå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨å±‚çº§ã€‚è®©ä½¿ç”¨è€…è®¤ä¸ºè‡ªå·±åœ¨è°ƒç”¨äº§ç”Ÿç±»çš„æ–¹æ³•ï¼Œè€Œå…¶å®æ˜¯äº§ç”Ÿç±»ä¸­ç»„åˆå®ä¾‹çš„å‡½æ•°ã€‚

##ğŸŒ°æˆ‘æ¥ä¸¾ä¸ªè€å¸ˆå»ä¸Šè¯¾çš„ä¾‹å­å§
```
import Foundation
/// è¿™æ˜¯é”¦å›Šç±»
protocol TeachCategorical {
    func teach()
}

class MathClass: TeachCategorical {
    func teach() {
        print("æ•™æ•°å­¦")
    }
}

class EnglishClass: TeachCategorical {
    func teach() {
        print("æ•™è¯­æ–‡")
    }
}
/// ------------æˆ‘æ˜¯åˆ†å‰²çº¿ -----------
class ClassRoom  {
    private var teachFunction: TeachCategorical! = MathClass()
    
    func setTeachFunction(teach: TeachCategorical) {
        self.teachFunction = teach
    }
    
    func publish() {
        self.teachFunction.teach()
    }
}

class MathClassRoom: ClassRoom {
    override init() {
        super.init()
    }
    
    func teachMath() {
        self.setTeachFunction(MathClass())
    }
}

class EnglishClassRoom: ClassRoom {
    override init() {
        super.init()
    }
    
    func teachEnglish() {
        self.setTeachFunction(EnglishClass())
    }
}


let mathroom : MathClassRoom = MathClassRoom()
mathroom.teachMath()
mathroom.publish()

let englishRoom :EnglishClassRoom = EnglishClassRoom()
englishRoom.teachEnglish()
englishRoom.publish()
 
```
æˆ‘æŠŠStrategyå°è£…æˆæ¥å£ï¼ˆpsæŠŠéœ€è¦æŠ½è±¡çš„æ–¹æ³•åšæˆæ¥å£ï¼Œæ˜¯ä¸ªéå¸¸æ˜æ™ºçš„é€‰æ‹©ï¼Œè¿™æ°æ°ä¹Ÿæ˜¯æ¥å£å­˜åœ¨çš„æ„ä¹‰ï¼‰ç„¶åå†™äº†ä¸¤ä¸ªä¸åŒçš„é”¦å›Šç±»ã€‚åˆ†åˆ«å®ç°äº†teachæ–¹æ³•ç”¨æ¥æ•™è¯¾ã€‚

ä¸‹é¢å°±æ˜¯éœ€è¦æŠŠä¸åŒçš„æ•™å®¤åˆ†é…ä¸ºä¸åŒçš„èŒèƒ½äº†ã€‚äºæ˜¯ï¼Œåº”è¯¥å‘ç”Ÿçš„æ ·å­åº”è¯¥æ˜¯æ•°å­¦æ•™å¸ˆç”¨æ¥æ•™æ•°å­¦ï¼Œè‹±æ–‡æ•™å®¤æ•™è‹±æ–‡ã€‚

æŠŠæ•™å®¤æŠ½è±¡å‡ºæ¥å¹¶ä¸”ç»™æ•™å®¤ä¸€ä¸ªã€é”¦å›Šã€å±æ€§è®©æ•™å®¤åœ¨æƒ³è®¾ç½®è¿™ä¸ªæ•™å®¤èŒèƒ½çš„æ—¶å€™å¯ä»¥è®¾ç½®ã€‚ï¼ˆå½“ç„¶è¿™ç§è®¾ç½®å¯ä»¥æ”¾åœ¨ä»»ä½•åˆå§‹åŒ–å†…éƒ¨å¯¹è±¡çš„åœ°æ–¹æ¯”å¦‚initæ–¹æ³•ï¼Œsetæ–¹æ³•ä¹‹ç±»çš„ï¼‰ã€‚
æ•™å®¤è¿˜æœ‰ä¸€ä¸ªèŒèƒ½å°±æ˜¯è®©è¿™ä¸ªã€é”¦å›Šã€æœ‰ç”¨ï¼ˆä¹Ÿå°±æ˜¯è°ƒç”¨è¿™ä¸ªå®ä¾‹çš„æ–¹æ³•ï¼‰

è¿™é‡Œå¾ˆå¥½çš„çœ‹åˆ°äº†ï¼Œæˆ‘æŠŠæ•´ä¸ªç¨‹åºåˆ†å‰²æˆä¸¤ä¸ªéƒ¨åˆ†ã€‚
1. é”¦å›Š 
2. æ‰‹æŒé”¦å›Šçš„ä¸€ç¾¤ä¸œè¥¿

è¿™å°±æ˜¯Strategyæ¨¡å¼ã€‚
è®°ä½çš„æ˜¯ï¼Œä½ åœ¨ç¼–ç çš„æ—¶å€™å‘ç°ä»€ä¹ˆè¢«ç»å¸¸æ”¹åŠ¨ã€‚å¦‚æœæ”¹åŠ¨çš„æ˜¯æ–¹æ³•ï¼Œè®°å¾—ä½¿ç”¨æ¥å£å°è£…ä»–ä»¬ã€‚å¦‚æœæ”¹åŠ¨çš„æ˜¯æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬ä¸‹æ¬¡å†è¯´ç”¨ä»€ä¹ˆã€‚

-----------
##åŒèƒå…„å¼Ÿ Factory Pattern
### defalut factory pattern
ä¸ºä»€ä¹ˆè¦åœ¨ä¸€èµ·è¯´è¿™ä¸¤ä¸ªpatternå‘¢ï¼Œå› ä¸ºæˆ‘è§‰å¾—ä»ç»“æ„ä¸Šæ¥çœ‹ä»–ä»¬å¾ˆåƒï¼Œå¯ä»¥ä¸€èµ·**æ¨ªå‘å¯¹æ¯”**ã€‚
ç…§ä¾‹æˆ‘ä»¬è¿˜æ˜¯å…ˆä»åå­—å…¥æ‰‹ï¼Œfactoryï¼Œæ²¡å•¥å¥½ä»‹ç»çš„ã€‚åè¯:å·¥å‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªã€å·¥å‚ã€æ¥ã€åˆ¶é€ ã€å¹¶ä¸”äº§å‡ºã€äº§å“ã€ï¼Œè¿™é‡Œçš„ã€äº§å“ã€å°±æ˜¯æˆ‘ä»¬æƒ³è¦æ‰¹é‡ç”Ÿäº§æˆ–è€…æ–¹ä¾¿æ·»åŠ çš„ç±»ã€‚
æœ‰ä¸Šè¿°å¯ä»¥å¾—åˆ°ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªæ¨¡å¼ä¸­éœ€è¦å®šä¹‰äº§å“å¯¹è±¡ã€‚è‡ªç„¶è€Œç„¶çš„ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰æ¥å£æ¥æŒ‡å¯¼è¡Œä¸ºã€‚

```
// ç®€å•å·¥å‚æ¨¡å¼æ ·ä¾‹
/* ------- */
/// è¿™æ˜¯äº§å“ç±»
protocol Operators {
    func perform()
}

class Addition: Operators {
    func perform() {
        print("åšåŠ æ³•")
    }
}

class Minies: Operators {
    func perform() {
        print("åšå‡æ³•")
    }
}

class Divice: Operators {
    func perform() {
        print("åšé™¤æ³•")
    }
}

class Mutiple: Operators {
    func perform() {
        print("åšä¹˜æ³•")
    }
}

enum operatorsEnum {
    case Add, Minie, Divice, Mutiple
}
```
ç”±æ­¤å¯è§ï¼Œè¿™ä¸ªäº§å“çš„æ¨¡æ¿å…¶å®å’Œç­–ç•¥æ¨¡å¼çš„ç­–ç•¥ç±»çš„è¡¨ç°å½¢å¼å¦‚å‡ºä¸€è¾™ã€‚ç»§ç»­çœ‹å·¥å‚ç±»çš„å®ç°
```
class OperatorsFactory {
    func createOperatorWithType(operat: operatorsEnum) -> Operators {
        var operators : Operators
        switch operat{
        case .Add :
            operators = Addition()
        case .Divice:
            operators = Divice()
        case .Minie:
            operators = Minies()
        case .Mutiple:
            operators = Mutiple()
        }
        return operators
    }
}
```
ä½œä¸ºç®€å•å·¥å‚ï¼Œåªéœ€è¦ä¸€ä¸ªå‡½æ•°æ¥äº§ç”Ÿä¸åŒçš„äº§å“ï¼Œé€šè¿‡æ¥å£æ¥ä½¿ç”¨ã€é‡Œæ°æ›¿æ¢åŸåˆ™ã€æ¥å—æ‰€æœ‰çš„äº§å“ç±»å‹ï¼Œè¿”å›äº§å“å®ä¾‹ã€‚
æœ€åçœ‹ä¸€ä¸‹ä½¿ç”¨æ–¹æ³•ã€‚

```
class User {
    var factory: OperatorsFactory
    init(operaFactory: OperatorsFactory) {
        self.factory = operaFactory
    }
    
    func perfromWithType(opType: operatorsEnum) {
        let weapon: Operators = factory.createOperatorWithType(opType)
        weapon.perform()
    }
}

let users = User(operaFactory: OperatorsFactory())
users.perfromWithType(.Add)
users.perfromWithType(.Minie)
```
é¦–å…ˆä½¿ç”¨è€…ç±»ä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªç»„åˆçš„å·¥å‚ç±»çš„å®ä¾‹ï¼ˆè¿™æ ·ä¸€ç‚¹åˆå’Œç­–ç•¥æ¨¡å¼çš„è§’è‰²ç±»çš„å®ç°ç›¸åŒï¼‰ï¼Œç„¶åæœ‰ä¸€ä¸ªæ–¹æ³•ï¼ˆcreateOperatorWithType :opTypeï¼‰é€šè¿‡å¤–éƒ¨çš„äº§å“ç±»å‹è¿”å›å®ä¾‹ï¼Œç›´æ¥è°ƒç”¨è¿™ä¸ªå®ä¾‹çš„æ–¹æ³•ï¼ˆä»¥è½¬æ¢ä¸ºç”¨æˆ·ç±»çš„æ–¹æ³•ï¼‰
### Factory Method Pattern
> **å˜é‡å°±æ˜¯ç±»ï¼Œç±»å’Œå˜é‡çš„ç›¸äº’è½¬åŒ–**

è€ç”Ÿå¸¸è°ˆäº†ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä»åå­—å¼€å§‹å…¥æ‰‹ï¼Œã€å·¥å‚æ–¹æ³•ã€è¿™åå­—å¯èƒ½è¯´æ˜ä¸äº†ä»€ä¹ˆé—®é¢˜ï¼ˆæ¯”è¾ƒåƒä¸­å›½äººèµ·çš„åå­—ï¼‰

> å·¥å‚æ–¹æ³•æ¨¡å¼(Factory Method Pattern)åˆç§°ä¸ºå·¥å‚æ¨¡å¼ï¼Œä¹Ÿå«**è™šæ‹Ÿæ„é€ å™¨**(Virtual Constructor)æ¨¡å¼æˆ–è€…**å¤šæ€å·¥å‚**(Polymorphic Factory)æ¨¡å¼ï¼Œ

Virtual Constructor Patternå’ŒPolymorphic Factory Patternè¿™ä¸¤ä¸ªåå­—å°±å¾ˆèƒ½è¯´æ˜é—®é¢˜äº†ã€‚
åœ¨è®¡ç®—æœºç§‘å­¦é‡Œé¢å¸¸å¸¸æœ‰äººå–œæ¬¢è¯´Virtualè¿™ä¸ªè¯ï¼Œã€è™šæ‹ŸåŒ–ã€å¬ä¸Šå»å°±å¾ˆç‰›é€¼ï¼ŒåŸºæœ¬ä¸Šçœ‹åˆ°è¿™ä¸ªè¯çš„æ—¶å€™å°±çŸ¥é“è¿™ä¸ªäººæ˜¯æŠŠä»€ä¹ˆä¸œè¥¿æŠ½è±¡æˆä¸€ä¸ªæŠ½è±¡æè¿°äº†ï¼Œè€Œåœ¨ä»£ç å®ç°ä¸­æ¥å£å°±æ˜¯è¿™ç§æŠ½è±¡æè¿°ã€‚å†çœ‹çœ‹Polymorphic Factoryå°±èƒ½çŸ¥é“è¿™ä¸ªã€å·¥å‚ã€å¯èƒ½æ˜¯å¾ˆå¤šçš„ã€‚ï¼ˆä¸€èˆ¬è¿™ç§å¾ˆå¤šçš„ä¸œè¥¿ï¼Œå°±æ˜¯é€šè¿‡ä¸åŒçš„ç±»æ¥åˆ†å‰²èŒèƒ½ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨æ¥å£æŠŠä»–ä»¬ç»Ÿä¸€èµ·æ¥ï¼‰

æ¥æˆ‘ä»¬ä½¿ç”¨Virtual constructor é‡æ„ä¸Šé¢çš„ç®€å•å·¥å‚çœ‹çœ‹ã€‚

```
class OperationDecorator: Operators {
    var operat: Operators! = nil
    init(opera: Operators) {
        self.operat = opera
    }
    func perform() -> String{
        return operat.perform()
    }
}

class DoubleDecorator: OperationDecorator {
    override func perform() -> String{
        return "æµ®ç‚¹æ•°" + self.operat.perform()
    }
}

class IntDecorator: OperationDecorator {
    override func perform() -> String {
        return "æ•´æ•°" + self.operat.perform()
    }
}

```
è¿™é‡Œå†™äº†ä¸¤ä¸ªäº§å“ï¼Œ

```
protocol OperationUser {
    func performfWithType(operationType: operatorsEnum)
    func createOperaWithType(operationType: operatorsEnum) -> Operators!
}

extension OperationUser {
    func performfWithType(operationType: operatorsEnum) {
        let opt: Operators! = createOperaWithType(operationType)
        print(opt.perform())
    }
}

class DoubleUser: OperationUser {
    func createOperaWithType(operationType: operatorsEnum) -> Operators! {
        var opt: Operators
        switch operationType {
        case .Add:
            opt = DoubleDecorator(opera: Addition())
        case .Divice:
            opt = DoubleDecorator(opera:  Divice())
        case .Minie:
            opt = DoubleDecorator(opera:  Minies())
        case .Mutiple:
            opt = DoubleDecorator(opera:  Mutiple())
        }
        return opt
    }
}

var user: OperationUser = DoubleUser()

user.performfWithType(.Add)
```
###Abstract Factory Pattern
æŠ½è±¡å·¥å‚æ¨¡å¼çš„ä¸»è¦ä½œç”¨å°±æ˜¯æŠŠä¸Šè¿°çš„å·¥å‚ç±»çš„æ–¹æ³•æŠ½è±¡æˆæ¥å£ã€‚æˆ‘ä»¬ç›´æ¥çœ‹ä»£ç ã€‚
```
protocol WeaponType {
    func fire() -> String
}

class AK: WeaponType {
    func fire() -> String {
        return "AK: Fire"
    }
}

class AWP: WeaponType {
    func fire() -> String {
        return "AWP: Fire"
    }
}

class HK: WeaponType {
    func fire() -> String {
        return "HK: Fire"
    }
}

class WeaponDecorator: WeaponType {
    var weapon: WeaponType! = nil
    init(weapon: WeaponType) {
        self.weapon = weapon
    }
    
    func fire() -> String {
        return weapon.fire()
    }
}

class GermanyDecorator: WeaponDecorator {
    override func fire() -> String {
        return "å¾·å›½åˆ¶é€ " + self.weapon.fire()
    }
}


class AmericaDecorator: WeaponDecorator {
    override func fire() -> String {
        return "ç¾å›½åˆ¶é€ " + self.weapon.fire()
    }
}

/**
 *  æŠ½è±¡å·¥å‚æ¥å£
 */
protocol WeaponFactoryType {
    func createAK() -> WeaponType
    func createAWP() -> WeaponType
    func createHK() -> WeaponType
}

/// æŠ½è±¡å·¥å‚çš„å…·ä½“ç±»å®ç°

class AmericanWeaponFactory: WeaponFactoryType {
    func createAK() -> WeaponType {
        return AmericaDecorator(weapon: AK())
    }
    
    func createHK() -> WeaponType {
        return AmericaDecorator(weapon: HK())
    }
    
    func createAWP() -> WeaponType {
        return AmericaDecorator(weapon: AWP())
    }
}

class GermanyWeaponFactory: WeaponFactoryType {
    func createAWP() -> WeaponType {
        return GermanyDecorator(weapon: AWP())
    }
    
    func createHK() -> WeaponType {
        return GermanyDecorator(weapon: HK())
    }
    
    func createAK() -> WeaponType {
        return GermanyDecorator(weapon: AK())
    }
}

enum WeaponTypeEnumeration {
    case AK, AWP, HK
}

class WeaponUser {
    private var factory: WeaponFactoryType
    init(factory: WeaponFactoryType) {
        self.factory = factory
    }
    
    func setFactory(factory: WeaponFactoryType) {
        self.factory = factory
    }
    
    func fireWithType(weaponType: WeaponTypeEnumeration) {
        var weapon: WeaponType
        switch weaponType {
        case .AK:
            weapon = self.factory.createAK()
        case .AWP:
            weapon = self.factory.createAWP()
        case .HK:
            weapon = self.factory.createHK()
        }
        
        print(weapon.fire())
    }
}


var user: WeaponUser = WeaponUser(factory: AmericanWeaponFactory())

user.fireWithType(.AWP)
user.fireWithType(.HK)

user.setFactory(GermanyWeaponFactory())
print("\n")
user.fireWithType(.AWP)
user.fireWithType(.HK)

```
ä¸Šè¿°ä»£ç å’Œå·¥å‚æ–¹æ³•æ¨¡å¼å¯¹äºuserçš„å°è£…åŸºæœ¬ç›¸åŒï¼Œéƒ½æ˜¯ç»„åˆä¸€ä¸ªå·¥å‚ï¼Œåªæ˜¯è¿™æ¬¡çš„æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¥å£ï¼Œä¸Šæ¬¡æ˜¯ç±»ã€‚
### å·¥å‚æ–¹æ³•å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼çš„å¼‚åŒ
å…¶å®æŠ½è±¡å·¥å‚æ˜¯é€šè¿‡æ¥å£æ¥äº§ç”Ÿå·¥å‚çš„é›†åˆï¼Œè€Œå·¥å‚æ–¹æ³•ä¼šé€‰å–å·¥å‚æ¥ã€ç”Ÿäº§ã€
```
/**
 *  å¯¹ä½¿ç”¨è€…æŠ½è±¡
 */
protocol WeaponUserType {
    func fireWithType(weaponType: WeaponTypeEnumeration)
    func createWeaponWithType(weaponType: WeaponTypeEnumeration) -> WeaponType!
    func createWeaponFactory() -> WeaponFactoryType
}

extension WeaponUserType {
    func fireWithType(weaponType: WeaponTypeEnumeration) {
        let weapon: WeaponType = createWeaponWithType(weaponType)
        print(weapon.fire())
    }
    
    func createWeaponWithType(weaponType: WeaponTypeEnumeration) -> WeaponType! {
        var weapon: WeaponType
        
        switch weaponType {
        case .AK:
            weapon = createWeaponFactory().createAK()
        case .AWP:
            weapon = createWeaponFactory().createAWP()
        case .HK:
            weapon = createWeaponFactory().createHK()
        }
        
        return weapon
    }
}

class AmericanWeaponUser: WeaponUserType {
    func createWeaponFactory() -> WeaponFactoryType {
        return AmericanWeaponFactory()
    }
}

class GermanyWeaponUser: WeaponUserType {
    func createWeaponFactory() -> WeaponFactoryType {
        return GermanyWeaponFactory()
    }
}

var usr: WeaponUserType = AmericanWeaponUser()
usr.fireWithType(.AK)
```
åœ¨è¿™é‡Œå·¥å‚æ–¹æ³•æ¨¡å¼çš„å…·ä½“å®ç°å°±æ˜¯Useræ¥å£å®ç°ç±»çš„`func createWeaponFactory() -> WeaponFactoryType`æ–¹æ³•ã€‚é€šè¿‡ä¸åŒç±»å¯¹äºè¿™ä¸ªæ–¹æ³•çš„å®ç°ï¼Œå®ç°å·¥å‚çš„é€‰å–ï¼Œé€‰å–å·¥å‚æ˜¯åœ¨`var usr: WeaponUserType = AmericanWeaponUser()`äº§ç”Ÿçš„ã€‚

å‚è€ƒé“¾æ¥
[é€é¥æ¸¸](http://so.gushiwen.org/guwen/bookv_3254.aspx)
[ç­–ç•¥æ¨¡å¼](http://design-patterns.readthedocs.io/zh_CN/latest/behavioral_patterns/strategy.html)
[å‚è€ƒåšå®¢Swiftå®ç°]( http://www.cnblogs.com/ludashi/p/5302269.html)

